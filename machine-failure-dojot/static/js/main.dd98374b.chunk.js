(this["webpackJsonpmachine-failure-dojot"]=this["webpackJsonpmachine-failure-dojot"]||[]).push([[0],{264:function(e,a){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAcCAYAAAATFf3WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAIOSURBVHgB5VbdccIwDFZ6fW9GyAalE5QRsgHpBLABbBCYgDIBMEHSCWADsgFs4EqxTNXUiRNQrw/97nSJY1v+Ilk/AC0wxsxRzqY/DigJKCMCP7kUH1uUHcoG5QLdiFFyfn+Joii0/j4gwYxMMnBPzBYfgyIeOuYqGAC22hElBUU8gC4+UF5BEdoES5QRuRuUoEIQCU1RRmBdTK5Wc7OWBYnQnO9hhTICJXQRTAZE5AplzHmQ3JuAEh4D8wUeWkI/ELETKCNEkDCGP4R2FKvjfxPk9JOBNlwtvgMn1uO6oVwmb3zf3tX5KBA8sB5KVSdHmscJjwu4FcZ2JgdzG8hqaUPXUswtxdo8xCUKEKWKMLSuHn39IOqa4WPu0Zfh+g2EiJDJhTs0QZ6Y8jnS5dLiraUxMvay0p2h7nkP4e55KBKwlivRUm98XrPiVNDWiRsbUWv4RbDl6m7bfAVJE0Xb5mubzpu37Ja0Zf2U59fGkyqMDQqnIxPfabzoIEjIfQcaQXDd2BB7LCGx8+hr6nC6ix4ECROpr1lJRoFxMwKf4CfiwDiEpfQMEbwIJTLcKV2UcieOqWM+ik8rzwHyW4V7pJX7BCBxKa7eY9NfLyi7oLMjNvayxx3ztQ63ht+N+V5JQqg5uTRTiL/XTjPPKBnpRmsumPS5595FXUmY5IyVaYN+eI/k3t0HY6N70mfvJ7Yoh6owT8fGAAAAAElFTkSuQmCC"},287:function(e,a,t){e.exports=t(601)},292:function(e,a,t){},294:function(e,a,t){},295:function(e,a,t){},324:function(e,a,t){},325:function(e,a,t){},490:function(e,a){},492:function(e,a){},561:function(e,a){},563:function(e,a){},587:function(e,a){},588:function(e,a){},601:function(e,a,t){"use strict";t.r(a);var n=t(0),i=t.n(n),r=t(3),o=t.n(r),l=t(175);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(292),t(293);var s=t(19),c=t(604),u=(t(294),t(606)),d=t(264),h=t.n(d),m=(t(295),function(e,a){var t=a.find((function(a){return a.path===e.pathname}));return t||(t=a.find((function(e){return"*"===e.path}))),t}),f=function(e){var a=e.location,t=e.mainRoutes;return i.a.createElement("div",null,i.a.createElement("div",{className:"logo"},i.a.createElement("img",{src:h.a,alt:"Falha em M\xe1quina"}),i.a.createElement("span",{className:"machine-header-title"},"Falha em M\xe1quina")),i.a.createElement(u.a,{className:"machine-header-menu",theme:"dark",mode:"horizontal",selectedKeys:[a&&t?m(a,t).path:null]}))};f.defaultProps={location:null,mainRoutes:null};var p=f,b=t(104),v=t.n(b),g=t(178),E=t(129),x=t(130),A=t(140),C=t(141),S=(t(324),t(609)),w=t(610),T=t(607),y=t(608),k=t(605),M=t(58),O=t(602),R=t(603),U=(t(325),function(e){Object(C.a)(t,e);var a=Object(A.a)(t);function t(){var e;Object(E.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(e=a.call.apply(a,[this].concat(i))).state={url:"",deviceSensors:"",deviceStatus:"",isModalVisible:!1},e.showModal=function(){e.setState({isModalVisible:!0})},e.setUrl=function(a){e.setState({url:a.target.value})},e.setDeviceSensors=function(a){e.setState({deviceSensors:a.target.value})},e.setDeviceStatus=function(a){e.setState({deviceStatus:a.target.value})},e.handleOk=function(){e.setState({isModalVisible:!1}),e.props.onUrlSet(e.state.url,e.state.deviceSensors,e.state.deviceSensors)},e.handleCancel=function(){e.setState({isModalVisible:!1})},e}return Object(x.a)(t,[{key:"render",value:function(){var e=this.state.isModalVisible,a=this.props.theme;return i.a.createElement(i.a.Fragment,null,i.a.createElement(T.a,{title:"Informar URL e Dispositivos",width:600,visible:e,onOk:this.handleOk,onCancel:this.handleCancel,okText:"OK",cancelText:"Cancelar",okButtonProps:{className:a}},i.a.createElement(k.a,Object.assign({},{labelCol:{span:8},wrapperCol:{span:16}},{name:"url"}),i.a.createElement(k.a.Item,{label:"URL",name:"url"},i.a.createElement(y.a,{placeholder:"http://xx.xx.xx.xx",onChange:this.setUrl,onPressEnter:this.handleOk})),i.a.createElement(k.a.Item,{label:"Dispositivo - Sensores",name:"sensors"},i.a.createElement(y.a,{placeholder:"xxxxx",onChange:this.setDeviceSensors,onPressEnter:this.handleOk})),i.a.createElement(k.a.Item,{label:"Dispositivo - Status",name:"status"},i.a.createElement(y.a,{placeholder:"xxxxx",onChange:this.setDeviceStatus,onPressEnter:this.handleOk})))),i.a.createElement("div",{className:"center-box"},i.a.createElement("h1",null,"Configura\xe7\xe3o da plataforma dojot"),i.a.createElement("p",null,"Informe a URL e Dispositivos da plataforma dojot"),i.a.createElement(M.a,{className:a,onClick:this.showModal},"Informar")))}}]),t}(i.a.Component)),I=t(139),N=t(59);t.n(N).a.elements.Rectangle.prototype.draw=function(){var e,a,t,n,i,r,o,l=this._chart.ctx,s=this._view,c=s.borderWidth,u=this._chart.config.options.cornerRadius,d=this._chart.config.options.fullCornerRadius,h=this._chart.config.options.stackedRounded,m=this._chart.config.type;if(u<0&&(u=0),"undefined"==typeof u&&(u=0),"undefined"==typeof d&&(d=!1),"undefined"==typeof h&&(h=!1),s.horizontal?(e=s.base,a=s.x,t=s.y-s.height/2,n=s.y+s.height/2,i=a>e?1:-1,r=1,o=s.borderSkipped||"left"):(e=s.x-s.width/2,a=s.x+s.width/2,t=s.y,i=1,r=(n=s.base)>t?1:-1,o=s.borderSkipped||"bottom"),c){var f=Math.min(Math.abs(e-a),Math.abs(t-n)),p=(c=c>f?f:c)/2,b=e+("left"!==o?p*i:0),v=a+("right"!==o?-p*i:0),g=t+("top"!==o?p*r:0),E=n+("bottom"!==o?-p*r:0);b!==v&&(t=g,n=E),g!==E&&(e=b,a=v)}l.beginPath(),l.fillStyle=s.backgroundColor,l.strokeStyle=s.borderColor,l.lineWidth=c;var x=[[e,n],[e,t],[a,t],[a,n]],A=["bottom","left","top","right"].indexOf(o,0);function C(e){return x[(A+e)%4]}-1===A&&(A=0);var S,w,T,y,k,M=C(0);l.moveTo(M[0],M[1]);for(var O=1;O<4;O++){var R,U,I,N,L,D,q,B,V;if(M=C(O),4===(S=O+1)&&(S=0),C(S),w=x[2][0]-x[1][0],T=x[0][1]-x[1][1],y=x[1][0],k=x[1][1],(R=u)>Math.abs(T)/2&&(R=Math.floor(Math.abs(T)/2)),R>Math.abs(w)/2&&(R=Math.floor(Math.abs(w)/2)),T<0)U=y,I=y+w,N=k+T,L=k+T,D=y,q=y+w,B=k,V=k,l.moveTo(D+R,B),l.lineTo(q-R,V),l.quadraticCurveTo(q,V,q,V-R),l.lineTo(I,L+R),d?l.quadraticCurveTo(I,L,I-R,L):l.lineTo(I,L,I-R,L),l.lineTo(U+R,N),d?l.quadraticCurveTo(U,N,U,N+R):l.lineTo(U,N,U,N+R),l.lineTo(D,B-R),l.quadraticCurveTo(D,B,D+R,B);else if(w<0)U=y+w,I=y,N=k,L=k,D=y+w,q=y,B=k+T,V=k+T,l.moveTo(D+R,B),l.lineTo(q-R,V),d?l.quadraticCurveTo(q,V,q,V-R):l.lineTo(q,V,q,V-R),l.lineTo(I,L+R),d?l.quadraticCurveTo(I,L,I-R,L):l.lineTo(I,L,I-R,L),l.lineTo(U+R,N),l.quadraticCurveTo(U,N,U,N+R),l.lineTo(D,B-R),l.quadraticCurveTo(D,B,D+R,B);else{for(var j=0,F=0,P=this._chart.data.datasets.length;F<P;F++)this._chart.getDatasetMeta(F).hidden||(j=F);this._datasetIndex===j?(l.moveTo(y+R,k),l.lineTo(y+w-R,k),l.quadraticCurveTo(y+w,k,y+w,k+R),l.lineTo(y+w,k+T-R),d||"horizontalBar"===m?l.quadraticCurveTo(y+w,k+T,y+w-R,k+T):l.lineTo(y+w,k+T,y+w-R,k+T),l.lineTo(y+R,k+T),d?l.quadraticCurveTo(y,k+T,y,k+T-R):l.lineTo(y,k+T,y,k+T-R),l.lineTo(y,k+R),d||"bar"===m?l.quadraticCurveTo(y,k,y+R,k):l.lineTo(y,k,y+R,k)):(l.moveTo(y,k),l.lineTo(y+w,k),l.lineTo(y+w,k+T),l.lineTo(y,k+T),l.lineTo(y,k))}}l.fill(),c&&l.stroke()};var L=function(e){var a=e.data;return i.a.createElement(i.a.Fragment,null,i.a.createElement(I.a,{data:a,height:200,options:{legend:{display:!1},tooltips:{enabled:!1},maintainAspectRatio:!1,cornerRadius:2,scales:{xAxes:[{gridLines:{display:!1},ticks:{fontColor:"#333",fontFamily:"Open Sans",fontSize:14,autoSkip:!1,maxRotation:0,minRotation:0}}],yAxes:[{gridLines:{display:!1},ticks:{fontColor:"#333",fontFamily:"Open Sans",fontSize:16,beginAtZero:!0,stepSize:400}}]}}}))},D=["Maquina1"],q=function(e){var a=e.data;return i.a.createElement(i.a.Fragment,null,i.a.createElement(I.b,{data:a,height:300,options:{animation:{duration:0},title:{display:!0,text:" ",lineHeight:2.5},maintainAspectRatio:!1,legend:{display:!1},scales:{xAxes:[{maxBarThickness:42,gridLines:{display:!1},ticks:{min:0,max:9,fontColor:"#333",fontFamily:"Open Sans",fontSize:14,callback:function(e,a,t){return 0===e||e>8?"":D[a-1]}}}],yAxes:[{gridLines:{display:!1},ticks:{fontColor:"#333",fontFamily:"Open Sans",fontSize:14,beginAtZero:!0,stepSize:.2,min:0,max:1}}]},tooltips:{callbacks:{label:function(e,a){return"Score: "+e.yLabel.toFixed(2).replace(".",",")}}}}}))},B=t(276),V=t.n(B),j=function(e,a){var t=e.split("/"),n=t[0]+"//"+t[2],i=t.slice(3).join("/");return V.a.create({baseURL:n}).post(i,a)},F=t(277),P=S.a.Option,J=function(e){Object(C.a)(t,e);var a=Object(A.a)(t);function t(e){var n;return Object(E.a)(this,t),(n=a.call(this,e)).showModal=function(){n.setState({isModalVisible:!0})},n.handleOk=function(){n.setState({isModalVisible:!1}),n.handleUrlSet(n.state.url,n.state.deviceSensors,n.state.deviceStatus)},n.handleCancel=function(){n.setState({isModalVisible:!1})},n.handleUrlSet=function(e,a,t){n.setState({url:e}),n.interval&&clearInterval(n.interval),n.dataList=new Array(D.length).fill(null).map((function(e){return[]})),n.predictionList=new Array(D.length).fill(null).map((function(e){return[]}));!function(e,a,t,n,i){var r=Object(F.connect)(e),o="/admin/attrs/".concat(a),l="/admin/attrs/".concat(t);r.on("connect",(function(){r.subscribe(o,(function(e){e||r.publish("presence","Hello mqtt"),console.log(e)})),r.subscribe(l,(function(e){e||r.publish("presence","Hello mqtt"),console.log(e)}))})),r.on("message",(function(e,a){console.log(a.toString()),e===o&&n(a),e===o&&i(a)}))}(e,a,t,(function(e){n.dataList[0].push(e)}),(function(e){n.predictionList[0].push(e)}))},n.handleMachineSelected=function(e){n.setState({machine:e,machineIndex:D.indexOf(e)})},n.state={url:"",deviceSensors:"",deviceStatus:"",isModalVisible:!1,machine:"Maquina1",machineIndex:6,score:"",measuresData:{},failureData:{}},n.dataList=new Array(D.length).fill(null).map((function(e){return[]})),n.predictionList=new Array(D.length).fill(null).map((function(e){return[]})),n}return Object(x.a)(t,[{key:"componentWillUnmount",value:function(){var e=Object(g.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.interval&&clearInterval(this.interval);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"postData",value:function(){var e=Object(g.a)(v.a.mark((function e(a,t){var n,i,r,o,l,s,c,u,d,h,m,f=this;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.props.data,i=n.filter((function(e){return e.Data===t})).map(Object.values),r=Object.keys(n[0]),e.next=5,j(a,{data:{ndarray:i,names:r}});case 5:200===(o=e.sent).status?(i.forEach((function(e,a){var t=D.findIndex((function(a){return a===e[3]}));f.dataList[t].push(e),f.predictionList[t].push(o.data.data.ndarray[a])})),l={datasets:[]},s=[["rgba(224, 162, 22, 0.1)","rgba(224, 162, 22, 0.3)","rgba(224, 162, 22, 0.5)","rgba(224, 162, 22, 0.7)","rgba(224, 162, 22, 1.0)"],["rgba(46, 184, 166, 0.1)","rgba(46, 184, 166, 0.3)","rgba(46, 184, 166, 0.5)","rgba(46, 184, 166, 0.7)","rgba(46, 184, 166, 1.0)"],["rgba(0, 148, 173, 0.1)","rgba(0, 148, 173, 0.3)","rgba(0, 148, 173, 0.5)","rgba(0, 148, 173, 0.7)","rgba(0, 148, 173, 1.0)"],["rgba(250, 126, 25, 0.1)","rgba(250, 126, 25, 0.3)","rgba(250, 126, 25, 0.5)","rgba(250, 126, 25, 0.7)","rgba(250, 126, 25, 1.0)"]],c=o.data.data.names.findIndex((function(e){return"Sim"===e})),D.forEach((function(e,a){l.datasets.push({label:e,backgroundColor:s[a%s.length],borderColor:"rgba(0, 0, 0, 0.0)",data:f.predictionList[a].slice(-5).map((function(e){var t=e[c],n=155*Math.pow(t,3)-268*Math.pow(t,2)+150*t+12.5;return{x:a+1,y:t,r:n}}))})})),u=this.state.score,d=this.state.measuresData,this.state.machineIndex>-1&&(h=this.dataList[this.state.machineIndex],(d={labels:[],datasets:[]}).labels=["Vibra\xe7\xe3o 1","Vibra\xe7\xe3o 2","Vibra\xe7\xe3o 3","Vibra\xe7\xe3o 4","Vibra\xe7\xe3o 5","Vibra\xe7\xe3o 6"],h.length>0&&d.datasets.push({label:"Medidas de Vibra\xe7\xe3o",backgroundColor:"#0094AD",borderColor:"#0094AD",borderWidth:1,data:h[h.length-1].slice(4,10)}),(m=this.predictionList[this.state.machineIndex]).length>0&&(u=m[m.length-1][c].toFixed(2).replace(".",","))),this.setState({score:u,measuresData:d,failureData:l})):w.a.error("N\xe3o foi poss\xedvel acessar a URL informada.");case 7:case"end":return e.stop()}}),e,this)})));return function(a,t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,a=this.state,t=a.url,n=a.isModalVisible,r=a.machine,o=a.measuresData,l=a.failureData;return i.a.createElement(i.a.Fragment,null,""===t?i.a.createElement(U,{theme:"orange",onUrlSet:this.handleUrlSet}):i.a.createElement(i.a.Fragment,null,i.a.createElement(T.a,{title:"Informar URL",width:600,visible:n,onOk:this.handleOk,onCancel:this.handleCancel,okText:"OK",cancelText:"Cancelar",okButtonProps:{className:"orange"}},i.a.createElement(y.a,{placeholder:"URL",onChange:function(a){return e.setState({url:a.target.value})},value:t,onPressEnter:this.handleOk})),i.a.createElement(k.a,{layout:"inline"},i.a.createElement(k.a.Item,{label:"M\xe1quinas"},i.a.createElement(S.a,{style:{width:300},placeholder:"Selecione",value:r,onChange:this.handleMachineSelected},D.map((function(e){return i.a.createElement(P,{key:e},e)})))),i.a.createElement(k.a.Item,{style:{float:"right",margin:0}},i.a.createElement(M.a,{className:"orange",style:{width:100},onClick:this.showModal},"URL"))),i.a.createElement(O.a,{gutter:16},i.a.createElement(R.a,{span:6},i.a.createElement("div",{className:"white-box no-padding"},i.a.createElement("div",{className:"white-box-header"},"M\xe1quina | ",i.a.createElement("span",{className:"blue"},this.state.machine)),i.a.createElement("div",{className:"white-box-content"},i.a.createElement(M.a,{shape:"circle",className:"score"},this.state.score),i.a.createElement("div",{className:"text-center"},"probabilidade de falha")))),i.a.createElement(R.a,{span:18},i.a.createElement("div",{className:"white-box no-padding"},i.a.createElement("div",{className:"white-box-header"},"Medidas de vibra\xe7\xe3o | ",i.a.createElement("span",{className:"blue"},this.state.machine)),i.a.createElement("div",{className:"white-box-content"},i.a.createElement(L,{data:o}))))),i.a.createElement(O.a,null,i.a.createElement(R.a,{span:24},i.a.createElement("div",{className:"white-box no-padding",style:{height:400}},i.a.createElement("div",{className:"white-box-header"},"Probabilidade de falha  | ",i.a.createElement("span",{className:"blue"},"Todas as m\xe1quinas")),i.a.createElement("div",{className:"white-box-content"},i.a.createElement(q,{data:l})))))))}}]),t}(i.a.Component),K=c.a.Header,Q=c.a.Content,W=function(){return i.a.createElement(i.a.Fragment,null,i.a.createElement(K,null,i.a.createElement(p,null)),i.a.createElement(c.a,{className:"machine-container"},i.a.createElement(Q,{className:"machine-wrapper"},i.a.createElement(J,null))))},z=[{path:"*",exact:!0,icon:"dollar",title:"Falha em M\xe1quina",component:function(){return i.a.createElement(W,null)}}],Y=function(){return i.a.createElement(c.a,null,i.a.createElement(c.a,null,i.a.createElement(s.c,null,z.map((function(e){return i.a.createElement(s.a,{key:e.path,exact:e.exact,path:e.path,component:e.component})})))))};o.a.render(i.a.createElement(l.a,null,i.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[287,1,2]]]);
//# sourceMappingURL=main.dd98374b.chunk.js.map